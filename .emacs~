
;;;; Paackage Config Setup
;; Melpa
(require 'package)
(let* ((no-ssl (and (memq system-type '(windows-nt ms-dos))
                    (not (gnutls-available-p))))
       (url (concat (if no-ssl "http" "https") "://melpa.org/packages/")))
  (add-to-list 'package-archives (cons "melpa" url) t))
(when (< emacs-major-version 24)
  (add-to-list 'package-archives '("gnu" . "http://elpa.gnu.org/packages/")))
(package-initialize) ;; Uncomment if choose to undo dependency on use-package

;; Configure use-package
(eval-when-compile
  ;; https://github.com/jwiegley/use-package
  (add-to-list 'load-path "~/.emacs.d/lisp/")
  (require 'use-package))



;;;; Managed by Emacs
(custom-set-variables
 ;; custom-set-variables was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(custom-safe-themes
   (quote
	("4b207752aa69c0b182c6c3b8e810bbf3afa429ff06f274c8ca52f8df7623eb60" "53a9ec5700cf2bb2f7059a584c12a5fdc89f7811530294f9eaf92db526a9fb5f" "e051e6443d10449b337d509da3c1e7c94d5950aad765a328fdde8b277cfe531a" "35e8498da0b3d64e982aea19c66fd862ac776f7c4af9008e3409fe4f84fa43e2" "5467ea02f4ba217ebd1fd32c6e967fec829421489f3bf485c44c42d3d7cbd622" "76245a1e9416670117619db8277584a6df7b660f7fbdd4c3c81069d83863333e" "adadd38fbeedf2c5f0f0782f92bed855c85e73dbc7fe7f857aab9131184646c4" "7d805afe673b88473d0d4d16796f00a9ba4e482d16a5778883a62ef0b27c8e9a" "1029f0e0739cdbb11861e6f5dc39468c529e0c241579d3ac5ecf16c7927b9fbc" "e443a6a73353b9db904330770472840f603fb7df42b7b2ba91672bd107f5c7fb" "72d739de11fab77e048bbf85172c75399bb64b44205afc951908c646278b6cef" "62f24c85a2e9c055df8f4f2ca5d01f954b7b0ca5c5a613b9b9e5d308703db360" default)))
 '(inhibit-startup-screen t)
 '(menu-bar-mode nil)
 '(package-selected-packages
   (quote
	(use-package vimrc-mode markdown-preview-mode rainbow-mode darktooth-theme jbeans-theme badwolf-theme doom-themes avy ace-jump-mode base16-theme matlab-mode ujelly-theme rust-mode color-theme-sanityinc-tomorrow badger-theme autopair atom-dark-theme)))
 '(ring-bell-function (quote ignore))
 '(scroll-bar-mode nil)
 '(tool-bar-mode nil))
(custom-set-faces
 ;; custom-set-faces was added by Custom.
 ;; If you edit it by hand, you could mess it up, so be careful.
 ;; Your init file should contain only one such instance.
 ;; If there is more than one, they won't work right.
 '(default ((t (:inherit nil :stipple nil :background "#1b1818" :foreground "white smoke" :inverse-video nil :box nil :strike-through nil :overline nil :underline nil :slant normal :weight normal :height 100 :width normal :foundry "1ASC" :family "Droid Sans Mono Slashed for Powerline")))))



;;;; Packages (configured using use-package)
(use-package helm
  ;; https://emacs.stackexchange.com/questions/34277/best-practice-for-emacs-helm-setup-after-use-package-verse
  ;; https://github.com/jwiegley/dot-emacs/blob/master/init.el
  :ensure t
  :bind ("M-x" . helm-M-x)
  :config (helm-autoresize-mode 1))

(use-package helm-descbinds
  ;; replace default keybindings descriptions using 'C-h b' with helm interface
  :ensure t
  :bind ("C-h b" . helm-descbinds)
  :init
  (fset 'describe-bindings 'helm-descbinds))

(use-package helm-describe-modes
  ;; replace default mode descriptions using "C-h m" with helm interface
  :ensure t
  :after helm
  :bind ("C-h m" . helm-describe-modes))


(use-package paredit
  :ensure t
  :init (progn
		  (add-hook 'emacs-lisp-mode-hook #'enable-paredit-mode)
		  (add-hook 'common-lisp-mode-hook #'enable-paredit-mode)))

(use-package autopair
  ;; https://github.com/joaotavora/autopair
  :ensure t
  :diminish autopair-mode
  :config (autopair-global-mode 1))

(use-package avy
  ;; https://github.com/bbatsov/emacs.d/blob/master/init.el
  :ensure t
  :bind ("C-:" . avy-goto-char-timer))

(use-package markdown-mode
  ;; https://github.com/krobertson/emacs.d/blob/master/packages.el
  :ensure t
  :mode ("\\.\\(m\\(ark\\)?down\\|md\\)$" . markdown-mode))

;;(use-package vimrc-mode
;;  :defer t)

(use-package rust-mode
  ;; https://github.com/nlopes/dotfiles/blob/master/.emacs.d/rust.el
  :ensure t
  :defer t
  :init
  (require 'rust-mode)
  (add-to-list 'auto-mode-alist '("\\.rs\\'" . rust-mode)))

(use-package matlab-mode
  :ensure t
  :defer t)


;;;; Settings
;; Line Numbers and Tabs
(global-linum-mode t)
;; Windmove
(when (fboundp 'windmove-default-keybindings)
  (windmove-default-keybindings))
;; Show matching parens
(setq show-paren-delay 0)
(show-paren-mode t)
;; Language formatting
(setq c-basic-offset 4)
(setq-default tab-width 4)
(setq-default indent-tabs-mode t)

;; Clang Format
;; To make .clang-format file for a project:
;; $ clang-format -style=llvm -dump-config > .clang-format
(load "/home/aczaja/llvm/llvm/tools/clang/tools/clang-format/clang-format.el")
(global-set-key (kbd "C-M-`") 'clang-format-region)

;; Theme
(add-to-list 'load-path "~/emacs/nyx-theme/")
(add-to-list 'custom-theme-load-path "~/emacs/nyx-theme")
(require 'nyx-theme)
(load-theme 'nyx t)
